var customizer=function(){"use strict";var e,s,t,n,o,i,c,r,a,u,l,d="https://api.github.com/repos/mashery/portal-themes/contents/dist/",m=document.querySelector("#download-custom-js"),p=document.querySelector("#download-custom-css"),f=document.querySelector("#download-size"),h=document.querySelector("#download-init"),g=sessionStorage.getItem("portalCustomizerCache"),v=g?JSON.parse(g):{},j=function(){var e="";if(c.length>0&&(e+=c),r.length>0&&(e+="\n\nwindow.addEventListener('portalAfterRender', function () {\n\tm$.loadJS('/files/"+t+s+".js', function () {\n"+r+"\t});\n}, false)"),e.length<1)return void(h.innerHTML="// No initialization needed...");h.innerHTML=e.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;").trim(),"Prism"in window&&Prism.highlightAll()},S=function(){if(n.length<1)return void j();n.forEach((function(e){var s=e.getAttribute("value");e.classList.contains("has-inits")?v[d+"inits/"+s+".js"]?(c+=v[d+"inits/"+s+".js"]+"\n\n",j()):atomic.ajax({url:d+"inits/"+s+".js"}).success((function(e){v[d+"inits/"+s+".js"]=atob(e.content),c+=v[d+"inits/"+s+".js"]+"\n\n",sessionStorage.setItem("portalCustomizerCache",JSON.stringify(v)),j()})).error((function(e){j(),console.error(s+" wasn't found")})):j(),e.classList.contains("has-events")?v[d+"events/"+s+".js"]?(r+="\t\t"+v[d+"events/"+s+".js"].replace(new RegExp("\n","g"),"\n\t\t")+"\n",j()):atomic.ajax({url:d+"events/"+s+".js"}).success((function(e){v[d+"events/"+s+".js"]=atob(e.content),r+="\t\t"+v[d+"events/"+s+".js"].replace(new RegExp("\n","g"),"\n\t\t")+"\n",sessionStorage.setItem("portalCustomizerCache",JSON.stringify(v)),j()})).error((function(e){j(),console.error(s+" wasn't found")})):j()}))},y=function(){v[d+"inits/"+t+".js"]?(c=v[d+"inits/"+t+".js"],S()):atomic.ajax({url:d+"inits/"+t+".js"}).success((function(e){v[d+"inits/"+t+".js"]=atob(e.content),c=v[d+"inits/"+t+".js"],sessionStorage.setItem("portalCustomizerCache",JSON.stringify(v)),S()})).error((function(e){S(),console.error(t+" wasn't found")}))},w=function(e){return Math.round(100*e/1024)/100+"kb"},z=function(){var e=a+u,s=Math.round(100*a/e)+"%",t=Math.round(100*u/e)+"%";f.innerHTML="<p>Total Filesize: <strong>"+w(e)+"</strong> ("+s+" JavaScript and "+t+" CSS)</p>"},C=function(){var s="?compression="+(e?"production":"development")+"&layout="+t+"&plugins=",o=[];return n.forEach((function(e){o.push(e.value)})),s+=o.join("+"),history.replaceState&&history.replaceState({},null,s),s},L=function(e){var n=window.location;return"/*! "+t+s+"."+e+" | (c) "+(new Date).getFullYear()+" TIBCO | MIT License | "+n.protocol+n.hostname+n.pathname+C()+" */\n"},b=function(e,n){if(n.length<1)return void(e.innerHTML="No "+("download-custom-js"===e.id?"JavaScript":"CSS")+" Needed");e.classList.remove("disabled"),e.href="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(L("download-custom-js"===e.id?"js":"css"))+encodeURIComponent(n),e.innerHTML="Download "+("download-custom-js"===e.id?"JavaScript":"CSS"),e.download=t+s+("download-custom-js"===e.id?".js":".css"),z()},T=function(){m.classList.add("disabled"),m.href="",m.innerHTML="Generating...",p.classList.add("disabled"),p.href="",p.innerHTML="Generating...",f.innerHTML="",h.innerHTML="Generating..."},I=function(){v[d+"css/overrides"+s+".css"]&&(i+=v[d+"css/overrides"+s+".css"].styles,u+=v[d+"css/overrides"+s+".css"].size,b(p,i))},M=function(){if(n.length<1)return b(m,o),b(p,i),void I();var e=n.length-1;n.forEach((function(t,n){var c=t.getAttribute("value");t.classList.contains("has-js")?v[d+"js/"+c+s+".js"]?(o+=v[d+"js/"+c+s+".js"].scripts,a+=v[d+"js/"+c+s+".js"].size,b(m,o)):atomic.ajax({url:d+"js/"+c+s+".js"}).success((function(e){v[d+"js/"+c+s+".js"]={scripts:atob(e.content),size:e.size},o+=v[d+"js/"+c+s+".js"].scripts,a+=v[d+"js/"+c+s+".js"].size,sessionStorage.setItem("portalCustomizerCache",JSON.stringify(v)),b(m,o)})).error((function(e){})):b(m,o),t.classList.contains("has-css")?v[d+"css/"+c+s+".css"]?(i+=v[d+"css/"+c+s+".css"].styles,u+=v[d+"css/"+c+s+".css"].size,b(p,i)):atomic.ajax({url:d+"css/"+c+s+".css"}).success((function(e){v[d+"css/"+c+s+".css"]={styles:atob(e.content),size:e.size},i+=v[d+"css/"+c+s+".css"].styles,u+=v[d+"css/"+c+s+".css"].size,sessionStorage.setItem("portalCustomizerCache",JSON.stringify(v)),b(p,i)})).error((function(e){})):b(p,i),n===e&&I()}))},k=function(){v[d+"css/"+t+s+".css"]?(i=v[d+"css/"+t+s+".css"].styles,u+=v[d+"css/"+t+s+".css"].size,M()):atomic.ajax({url:d+"css/"+t+s+".css"}).success((function(e){var n=atob(e.content).split("/*! SPLIT: Overrides */");v[d+"css/"+t+s+".css"]={styles:n[0].trim(),size:e.size},n[1]&&(v[d+"css/overrides"+s+".css"]={styles:n[1].trim(),size:0}),i+=v[d+"css/"+t+s+".css"].styles,u+=v[d+"css/"+t+s+".css"].size,sessionStorage.setItem("portalCustomizerCache",JSON.stringify(v)),M()})).error((function(e){}))},E=function(){T(),e="production"===document.querySelector('input[name="compression"]:checked').getAttribute("value"),s=e?".min":"",t=document.querySelector('input[name="layout"]:checked').getAttribute("value"),n=document.querySelectorAll('input[name="plugins"]:checked'),o="",i="",c="",r="",a=0,u=0,k(),y()},J=function(){l&&clearTimeout(l),l=setTimeout(E,500)},q=function(e){var s={},t=document.createElement("a");t.href=e;for(var n=t.search.substring(1),o=n.split("&"),i=0;i<o.length;i++){var c=o[i].split("=");s[c[0]]=decodeURIComponent(c[1])}return s},x=function(e){e.target.closest('input[name="compression"], input[name="layout"], input[name="plugins"]')&&J()};if(!m||!p)return void document.removeEventListener("click",x,!1);document.addEventListener("click",x,!1),(function(){var e=q(window.location.href);if(e.compression&&e.compression.length>0){var s=document.querySelector('input[name="compression"][value="'+e.compression+'"]');s&&s.setAttribute("checked","checked")}if(e.layout&&e.layout.length>0){var t=document.querySelector('input[name="layout"][value="'+e.layout+'"]');t&&t.setAttribute("checked","checked")}if(e.plugins&&e.plugins.length>0){e.plugins.split("+").forEach((function(e){var s=document.querySelector('input[name="plugins"][value="'+e+'"]');s&&s.setAttribute("checked","checked")}))}})(),J()};