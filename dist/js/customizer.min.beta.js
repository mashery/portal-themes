var customizer=function(){"use strict";var s,e,t,n,i,o,c,r,a,u,l="https://api.github.com/repos/mashery/portal-themes/contents/dist/",d=document.querySelector("#download-custom-js"),m=document.querySelector("#download-custom-css"),f=document.querySelector("#download-size"),g=document.querySelector("#download-init"),p=sessionStorage.getItem("portalCustomizerCache"),j=p?JSON.parse(p):{},h=function(){var t="";if(o.length>0&&(t+=o),c.length>0&&(t+="\n\nwindow.addEventListener('portalAfterRender', function () {\n\tm$.loadJS('/files/"+e+s+".js', function () {\n"+c+"\t});\n}, false)"),t.length<1)return void(g.innerHTML="// No initialization needed...");g.innerHTML=t.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;").trim(),"Prism"in window&&Prism.highlightAll()},v=function(){if(t.length<1)return void h();t.forEach((function(s){var e=s.getAttribute("value");s.classList.contains("has-inits")?j[l+"inits/"+e+".js"]?(o+=j[l+"inits/"+e+".js"]+"\n\n",h()):atomic.ajax({url:l+"inits/"+e+".js"}).success((function(s){j[l+"inits/"+e+".js"]=atob(s.content),o+=j[l+"inits/"+e+".js"]+"\n\n",sessionStorage.setItem("portalCustomizerCache",JSON.stringify(j)),h()})).error((function(s){h(),console.error(e+" wasn't found")})):h(),s.classList.contains("has-events")?j[l+"events/"+e+".js"]?(c+="\t\t"+j[l+"events/"+e+".js"].replace(new RegExp("\n","g"),"\n\t\t")+"\n",h()):atomic.ajax({url:l+"events/"+e+".js"}).success((function(s){j[l+"events/"+e+".js"]=atob(s.content),c+="\t\t"+j[l+"events/"+e+".js"].replace(new RegExp("\n","g"),"\n\t\t")+"\n",sessionStorage.setItem("portalCustomizerCache",JSON.stringify(j)),h()})).error((function(s){h(),console.error(e+" wasn't found")})):h()}))},S=function(){j[l+"inits/"+e+".js"]?(o=j[l+"inits/"+e+".js"],v()):atomic.ajax({url:l+"inits/"+e+".js"}).success((function(s){j[l+"inits/"+e+".js"]=atob(s.content),o=j[l+"inits/"+e+".js"],sessionStorage.setItem("portalCustomizerCache",JSON.stringify(j)),v()})).error((function(s){v(),console.error(e+" wasn't found")}))},y=function(s){return Math.round(100*s/1024)/100+"kb"},z=function(){var s=r+a,e=Math.round(100*r/s)+"%",t=Math.round(100*a/s)+"%";f.innerHTML="<p>Total Filesize: <strong>"+y(s)+"</strong> ("+e+" JavaScript and "+t+" CSS)</p>"},w=function(t){return"/*! "+e+s+"."+t+" | (c) "+(new Date).getFullYear()+" TIBCO | MIT License | https://stagingcs1.mashery.com/docs/download */\n"},L=function(t,n){if(n.length<1)return void(t.innerHTML="No "+("download-custom-js"===t.id?"JavaScript":"CSS")+" Needed");t.classList.remove("disabled"),t.href="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(w("download-custom-js"===t.id?"js":"css"))+encodeURIComponent(n),t.innerHTML="Download "+("download-custom-js"===t.id?"JavaScript":"CSS"),t.download=e+s+("download-custom-js"===t.id?".js":".css"),z()},C=function(){d.classList.add("disabled"),d.href="",d.innerHTML="Generating...",m.classList.add("disabled"),m.href="",m.innerHTML="Generating...",f.innerHTML="",g.innerHTML="Generating..."},b=function(){j[l+"css/overrides"+s+".css"]&&(i+=j[l+"css/overrides"+s+".css"].styles,a+=j[l+"css/overrides"+s+".css"].size,L(m,i))},T=function(){if(t.length<1)return L(d,n),L(m,i),void b();var e=t.length-1;t.forEach((function(t,o){var c=t.getAttribute("value");t.classList.contains("has-js")?j[l+"js/"+c+s+".js"]?(n+=j[l+"js/"+c+s+".js"].scripts,r+=j[l+"js/"+c+s+".js"].size,L(d,n)):atomic.ajax({url:l+"js/"+c+s+".js"}).success((function(e){j[l+"js/"+c+s+".js"]={scripts:atob(e.content),size:e.size},n+=j[l+"js/"+c+s+".js"].scripts,r+=j[l+"js/"+c+s+".js"].size,sessionStorage.setItem("portalCustomizerCache",JSON.stringify(j)),L(d,n)})).error((function(s){})):L(d,n),t.classList.contains("has-css")?j[l+"css/"+c+s+".css"]?(i+=j[l+"css/"+c+s+".css"].styles,a+=j[l+"css/"+c+s+".css"].size,L(m,i)):atomic.ajax({url:l+"css/"+c+s+".css"}).success((function(e){j[l+"css/"+c+s+".css"]={styles:atob(e.content),size:e.size},i+=j[l+"css/"+c+s+".css"].styles,a+=j[l+"css/"+c+s+".css"].size,sessionStorage.setItem("portalCustomizerCache",JSON.stringify(j)),L(m,i)})).error((function(s){})):L(m,i),o===e&&b()}))},M=function(){j[l+"css/"+e+s+".css"]?(i=j[l+"css/"+e+s+".css"].styles,a+=j[l+"css/"+e+s+".css"].size,T()):atomic.ajax({url:l+"css/"+e+s+".css"}).success((function(t){var n=atob(t.content).split("/*! SPLIT: Overrides */");j[l+"css/"+e+s+".css"]={styles:n[0].trim(),size:t.size},n[1]&&(j[l+"css/overrides"+s+".css"]={styles:n[1].trim(),size:0}),i+=j[l+"css/"+e+s+".css"].styles,a+=j[l+"css/"+e+s+".css"].size,sessionStorage.setItem("portalCustomizerCache",JSON.stringify(j)),T()})).error((function(s){}))},I=function(){C(),s="production"===document.querySelector('input[name="compression"]:checked').getAttribute("value")?".min.beta":"",e=document.querySelector('input[name="layout"]:checked').getAttribute("value"),t=document.querySelectorAll('input[name="plugins"]:checked'),n="",i="",o="",c="",r=0,a=0,M(),S()},J=function(){u&&clearTimeout(u),u=setTimeout(I,500)},x=function(s){s.target.closest('input[name="compression"], input[name="layout"], input[name="plugins"]')&&J()};if(!d||!m)return void document.removeEventListener("click",x,!1);document.addEventListener("click",x,!1),J()};